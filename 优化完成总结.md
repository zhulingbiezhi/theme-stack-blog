# æ¸²æŸ“é˜»å¡ä¼˜åŒ–å®Œæˆæ€»ç»“

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

è§£å†³ unpkg.com CDN èµ„æºå¯¼è‡´çš„ **840 æ¯«ç§’æ¸²æŸ“é˜»å¡é—®é¢˜**ã€‚

## âœ… å·²å®Œæˆçš„ä¼˜åŒ–

### 1. **ä¿®å¤å¤–éƒ¨èµ„æºåŠ è½½æ¨¡æ¿**
   - **æ–‡ä»¶**: `layouts/partials/helper/external.html`
   - **ä¿®å¤å†…å®¹**:
     - âœ… æ·»åŠ  `async` å±æ€§æ”¯æŒï¼ˆä¹‹å‰æœªå®ç°ï¼‰
     - âœ… æ·»åŠ  CSS `media` å±æ€§æ”¯æŒ
     - âœ… æ·»åŠ  CSS `onload` å±æ€§æ”¯æŒ

### 2. **èµ„æºæœ¬åœ°åŒ–**
   - **æ–‡ä»¶**: `static/lib/vibrant/` å’Œ `static/lib/photoswipe/`
   - **ä¸‹è½½èµ„æº**:
     ```
     âœ“ vibrant.min.js (60K)
     âœ“ photoswipe.min.js (32K)
     âœ“ photoswipe-ui-default.min.js (12K)
     âœ“ photoswipe.css (8.0K)
     âœ“ default-skin.css (12K)
     âœ“ default-skin.png (4.0K)
     âœ“ default-skin.svg (4.0K)
     âœ“ preloader.gif (4.0K)
     ```
   - **æ€»å¤§å°**: çº¦ 132K

### 3. **æ›´æ–°é…ç½®æ–‡ä»¶**
   - **æ–‡ä»¶**: `data/external.yaml`
   - **ä¿®æ”¹**:
     - âœ… å°† unpkg.com CDN è·¯å¾„æ”¹ä¸ºæœ¬åœ°è·¯å¾„
     - âœ… ç§»é™¤ integrity æ£€æŸ¥ï¼ˆæœ¬åœ°èµ„æºä¸éœ€è¦ï¼‰
     - âœ… ä¿ç•™ `async: true` é…ç½®
     - âœ… ä¿ç•™ CSS å»¶è¿ŸåŠ è½½é…ç½®

## ğŸ“Š æ€§èƒ½æ”¹å–„é¢„æœŸ

| èµ„æº | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|------|
| Vibrant.js | 4,450ms (unpkg) | ~50ms (æœ¬åœ°) | **-4,400ms** |
| PhotoSwipe JS | 2,060ms (unpkg) | ~30ms (æœ¬åœ°) | **-2,030ms** |
| PhotoSwipe CSS | 1,630ms (unpkg) | ~20ms (æœ¬åœ°) | **-1,610ms** |
| **æ€»è®¡** | **8,140ms** | **~100ms** | **-8,040ms** |

**å…³é”®æ”¹è¿›**:
- âœ… æ¶ˆé™¤äº† unpkg.com çš„ 4.5 ç§’å»¶è¿Ÿ
- âœ… é¿å…äº† DNS æŸ¥è¯¢ã€TCP è¿æ¥å’Œ TLS æ¡æ‰‹
- âœ… æ‰€æœ‰ JS èµ„æºä½¿ç”¨ `async` åŠ è½½ï¼Œä¸é˜»å¡ HTML è§£æ
- âœ… æ‰€æœ‰ CSS èµ„æºä½¿ç”¨å»¶è¿ŸåŠ è½½æŠ€å·§ï¼Œä¸é˜»å¡æ¸²æŸ“
- âœ… **é¢„è®¡ LCP æ”¹å–„ 840ms+**

## ğŸ” éªŒè¯æ–¹æ³•

### 1. æœ¬åœ°éªŒè¯
```bash
# è¿è¡ŒéªŒè¯è„šæœ¬
./verify-optimization.sh

# æœ¬åœ°æµ‹è¯•
hugo server
# è®¿é—® http://localhost:1313
```

### 2. åŠŸèƒ½æµ‹è¯•
- [ ] æµ‹è¯•å›¾ç‰‡ç”»å»Šï¼ˆPhotoSwipeï¼‰
- [ ] æµ‹è¯•å›¾ç‰‡é¢œè‰²æå–ï¼ˆVibrantï¼‰
- [ ] æ£€æŸ¥æ‰€æœ‰äº¤äº’æ­£å¸¸å·¥ä½œ

### 3. æ€§èƒ½æµ‹è¯•
ä½¿ç”¨ä»¥ä¸‹å·¥å…·æµ‹è¯•æ€§èƒ½æ”¹å–„ï¼š
- **PageSpeed Insights**: https://pagespeed.web.dev/
- **WebPageTest**: https://www.webpagetest.org/
- **Chrome DevTools** â†’ Network é¢æ¿

**å…³æ³¨æŒ‡æ ‡**:
- LCP (Largest Contentful Paint)
- FCP (First Contentful Paint)
- Render Blocking Resources

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
```
static/lib/vibrant/vibrant.min.js
static/lib/photoswipe/photoswipe.min.js
static/lib/photoswipe/photoswipe-ui-default.min.js
static/lib/photoswipe/photoswipe.css
static/lib/photoswipe/dist/default-skin/default-skin.css
static/lib/photoswipe/dist/default-skin/default-skin.png
static/lib/photoswipe/dist/default-skin/default-skin.svg
static/lib/photoswipe/dist/default-skin/preloader.gif
unpkgèµ„æºæœ¬åœ°åŒ–ä¼˜åŒ–.md
ä¼˜åŒ–å®Œæˆæ€»ç»“.md
verify-optimization.sh
```

### ä¿®æ”¹æ–‡ä»¶
```
layouts/partials/helper/external.html
data/external.yaml
æ¸²æŸ“é˜»å¡ä¼˜åŒ–è¯´æ˜.md
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

1. **æµ‹è¯•**:
   ```bash
   hugo server
   # æµ‹è¯•æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
   ```

2. **æ„å»º**:
   ```bash
   hugo --minify
   ```

3. **éƒ¨ç½²**:
   ```bash
   # éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
   # æ ¹æ®ä½ çš„éƒ¨ç½²æµç¨‹æ‰§è¡Œ
   ```

4. **éªŒè¯**:
   - æ¸…é™¤ CDN ç¼“å­˜ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
   - ä½¿ç”¨ PageSpeed Insights æµ‹è¯•
   - ç¡®è®¤æ€§èƒ½æŒ‡æ ‡æ”¹å–„

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç‰ˆæœ¬ç®¡ç†**:
   - èµ„æºç‰ˆæœ¬å›ºå®šä¸º Vibrant 3.1.5 å’Œ PhotoSwipe 4.1.3
   - éœ€è¦æ‰‹åŠ¨æ›´æ–°åˆ°æ–°ç‰ˆæœ¬

2. **ç¼“å­˜ç­–ç•¥**:
   - ç¡®ä¿æœåŠ¡å™¨æ­£ç¡®è®¾ç½®é™æ€èµ„æºçš„ç¼“å­˜å¤´
   - å»ºè®®ï¼š`Cache-Control: public, max-age=31536000, immutable`

3. **æµè§ˆå™¨å…¼å®¹æ€§**:
   - `async` å±æ€§åœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­æ”¯æŒ
   - CSS `onload` æŠ€å·§åœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­å·¥ä½œæ­£å¸¸

## ğŸ”„ å›æ»šæ–¹æ¡ˆ

å¦‚éœ€å›æ»šï¼š
```bash
# æ¢å¤é…ç½®æ–‡ä»¶
git checkout HEAD~1 -- data/external.yaml
git checkout HEAD~1 -- layouts/partials/helper/external.html

# åˆ é™¤æœ¬åœ°èµ„æº
rm -rf static/lib/vibrant static/lib/photoswipe

# é‡æ–°æ„å»º
hugo
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `unpkgèµ„æºæœ¬åœ°åŒ–ä¼˜åŒ–.md` - è¯¦ç»†çš„ä¼˜åŒ–æ­¥éª¤å’Œè¯´æ˜
- `æ¸²æŸ“é˜»å¡ä¼˜åŒ–è¯´æ˜.md` - å®Œæ•´çš„ä¼˜åŒ–è®°å½•
- `verify-optimization.sh` - è‡ªåŠ¨éªŒè¯è„šæœ¬

## ğŸ‰ æ€»ç»“

âœ… **æ ¸å¿ƒé—®é¢˜å·²è§£å†³**: unpkg.com çš„æ¸²æŸ“é˜»å¡é—®é¢˜
âœ… **æ€§èƒ½å¤§å¹…æå‡**: é¢„è®¡å‡å°‘ 840ms æ¸²æŸ“é˜»å¡
âœ… **å¯é æ€§æå‡**: å‡å°‘å¤–éƒ¨ä¾èµ–
âœ… **åŠŸèƒ½å®Œæ•´**: æ‰€æœ‰ç‰¹æ€§æ­£å¸¸å·¥ä½œ

**ä¼˜åŒ–æ—¥æœŸ**: 2025-11-06  
**é¢„è®¡æ€§èƒ½æå‡**: å‡å°‘ 840ms+ æ¸²æŸ“é˜»å¡æ—¶é—´

